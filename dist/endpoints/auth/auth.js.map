{"version":3,"file":"auth.js","names":["_nodeServerEngine","require","_auth","_auth2","_auth3","loginEndpoint","exports","Endpoint","path","method","EndpointMethod","POST","handler","req","res","email","password","body","login","loginHandler","status","json","message","AUTH_USER_NOT_FOUND","error","AUTH_LOGIN_ERROR","authType","EndpointAuthType","NONE","validator","loginValidator"],"sources":["../../../src/endpoints/auth/auth.ts"],"sourcesContent":["import { Endpoint, EndpointAuthType, EndpointMethod, generateJwtToken } from 'node-server-engine';\r\nimport { Request, Response } from 'express';\r\nimport { loginHandler } from './auth.handler';\r\nimport { loginValidator } from './auth.validator';\r\nimport { \r\n  AUTH_USER_NOT_FOUND,\r\n  AUTH_LOGIN_ERROR\r\n } from './auth.const';\r\n\r\nexport const loginEndpoint = new Endpoint({\r\n  path: \"/auth/login\",\r\n  method: EndpointMethod.POST,\r\n  handler: async (req, res): Promise<void> => {\r\n    try {\r\n      const { email, password } = req.body;\r\n\r\n      const login = await loginHandler(email, password);\r\n      if(!login) {\r\n        res.status(404).json({ message: AUTH_USER_NOT_FOUND });\r\n        return;\r\n      }\r\n\r\n      res.status(200).json({ message: \"Logged in successfully\", login});\r\n    } catch (error) {\r\n      res.status(401).json({ message: AUTH_LOGIN_ERROR, error });\r\n    }\r\n  },\r\n  authType: EndpointAuthType.NONE,\r\n  validator: loginValidator,\r\n});\r\n"],"mappings":";;;;;;AAAA,IAAAA,iBAAA,GAAAC,OAAA;AAEA,IAAAC,KAAA,GAAAD,OAAA;AACA,IAAAE,MAAA,GAAAF,OAAA;AACA,IAAAG,MAAA,GAAAH,OAAA;AAKO,MAAMI,aAAa,GAAAC,OAAA,CAAAD,aAAA,GAAG,IAAIE,0BAAQ,CAAC;EACxCC,IAAI,EAAE,aAAa;EACnBC,MAAM,EAAEC,gCAAc,CAACC,IAAI;EAC3BC,OAAO,EAAE,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAoB;IAC1C,IAAI;MACF,MAAM;QAAEC,KAAK;QAAEC;MAAS,CAAC,GAAGH,GAAG,CAACI,IAAI;MAEpC,MAAMC,KAAK,GAAG,MAAM,IAAAC,kBAAY,EAACJ,KAAK,EAAEC,QAAQ,CAAC;MACjD,IAAG,CAACE,KAAK,EAAE;QACTJ,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAAEC,OAAO,EAAEC;QAAoB,CAAC,CAAC;QACtD;MACF;MAEAT,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE,wBAAwB;QAAEJ;MAAK,CAAC,CAAC;IACnE,CAAC,CAAC,OAAOM,KAAK,EAAE;MACdV,GAAG,CAACM,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAEG,uBAAgB;QAAED;MAAM,CAAC,CAAC;IAC5D;EACF,CAAC;EACDE,QAAQ,EAAEC,kCAAgB,CAACC,IAAI;EAC/BC,SAAS,EAAEC;AACb,CAAC,CAAC","ignoreList":[]}