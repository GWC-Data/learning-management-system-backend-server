{"version":3,"file":"auth.queries.js","names":["authQueries","exports","loginbyEmail","process","env","PROJECT_ID","DATASET_ID","TABLE_USER","getUserDetailsWithRole","TABLE_ROLE","TABLE_ROLE_PERMISSION","TABLE_PERMISSION"],"sources":["../../../src/queries/auth/auth.queries.ts"],"sourcesContent":["export const authQueries = {\r\n    loginbyEmail: `\r\n      SELECT id, email, password \r\n      FROM \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_USER}\\` \r\n      WHERE email = @email\r\n    `,\r\n  \r\n    // Fetch user details, role, and permissions\r\n    getUserDetailsWithRole: `\r\n      SELECT \r\n        u.id, u.firstName, u.lastName, u.email, \r\n        r.id as roleId, r.name as roleName, \r\n        ARRAY_AGG(p.action) as permissions\r\n      FROM \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_USER}\\` u\r\n      JOIN \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_ROLE}\\` r \r\n        ON u.roleId = r.id\r\n      LEFT JOIN \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_ROLE_PERMISSION}\\` rp\r\n        ON r.id = rp.roleId\r\n      LEFT JOIN \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_PERMISSION}\\` p\r\n        ON rp.permissionId = p.id\r\n      WHERE u.id = @userId\r\n      GROUP BY u.id, u.firstName, u.lastName, u.email, r.id, r.name\r\n    `,\r\n  };\r\n  "],"mappings":";;;;;;AAAO,MAAMA,WAAW,GAAAC,OAAA,CAAAD,WAAA,GAAG;EACvBE,YAAY,EAAE;AAClB;AACA,eAAeC,OAAO,CAACC,GAAG,CAACC,UAAU,IAAIF,OAAO,CAACC,GAAG,CAACE,UAAU,IAAIH,OAAO,CAACC,GAAG,CAACG,UAAU;AACzF;AACA,KAAK;EAED;EACAC,sBAAsB,EAAE;AAC5B;AACA;AACA;AACA;AACA,eAAeL,OAAO,CAACC,GAAG,CAACC,UAAU,IAAIF,OAAO,CAACC,GAAG,CAACE,UAAU,IAAIH,OAAO,CAACC,GAAG,CAACG,UAAU;AACzF,eAAeJ,OAAO,CAACC,GAAG,CAACC,UAAU,IAAIF,OAAO,CAACC,GAAG,CAACE,UAAU,IAAIH,OAAO,CAACC,GAAG,CAACK,UAAU;AACzF;AACA,oBAAoBN,OAAO,CAACC,GAAG,CAACC,UAAU,IAAIF,OAAO,CAACC,GAAG,CAACE,UAAU,IAAIH,OAAO,CAACC,GAAG,CAACM,qBAAqB;AACzG;AACA,oBAAoBP,OAAO,CAACC,GAAG,CAACC,UAAU,IAAIF,OAAO,CAACC,GAAG,CAACE,UAAU,IAAIH,OAAO,CAACC,GAAG,CAACO,gBAAgB;AACpG;AACA;AACA;AACA;AACE,CAAC","ignoreList":[]}