{"version":3,"file":"batch.queries.js","names":["batchQueries","exports","createBatch","process","env","PROJECT_ID","DATASET_ID","TABLE_BATCH","getBatchDetails","TABLE_BATCH_TRAINEE","TABLE_USER","TABLE_COURSE","getBatches","getBatchByBatchName","getBatchIdsByTraineeId","updateBatch","deleteBatch"],"sources":["../../../src/queries/batch/batch.queries.ts"],"sourcesContent":["export const batchQueries = {\r\n    createBatch: `\r\n        INSERT INTO \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_BATCH}\\`\r\n         (id, courseId, batchName, startDate, endDate, createdBy, createdAt)\r\n    VALUES (@id, @courseId, @batchName, @startDate, @endDate, @createdBy, @createdAt)\r\n`,\r\n    \r\n    getBatchDetails: `\r\n   SELECT \r\n      b.id AS batchId, \r\n      b.courseId AS batchCourseId, \r\n      b.batchName AS batchName,\r\n      b.startDate AS batchStartDate, \r\n      b.endDate AS batchEndDate,\r\n      c.courseName AS courseName,\r\n      c.courseImg AS courseImg,\r\n      c.courseLink AS courseLink,\r\n      ARRAY_AGG(\r\n        STRUCT(\r\n          t.id AS traineeId,\r\n          t.firstName AS firstName,\r\n          t.lastName AS lastName\r\n        )\r\n      ) AS trainees\r\n  FROM \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_BATCH}\\` b\r\n  LEFT JOIN \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_BATCH_TRAINEE}\\` bt \r\n      ON b.id = bt.batchId\r\n  LEFT JOIN \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_USER}\\` t \r\n      ON bt.traineeId = t.id\r\n  LEFT JOIN \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_COURSE}\\` c\r\n      ON b.courseId = c.id\r\n  WHERE b.id = @batchId\r\n  GROUP BY b.id, b.courseId, b.batchName, b.startDate, b.endDate, c.courseName, c.courseImg, c.courseLink;\r\n`,\r\n\r\n    getBatches:  `\r\n  SELECT \r\n    b.id AS batchId, \r\n    b.courseId AS batchCourseId, \r\n    b.batchName AS batchName,\r\n    b.startDate AS batchStartDate, \r\n    b.endDate AS batchEndDate,\r\n    t.id AS traineeId, \r\n    t.firstName AS traineeFirstName,\r\n    t.lastName AS traineeLastName,\r\n    c.courseName AS courseName,\r\n    c.courseImg AS courseImg,\r\n    c.courseLink AS courseLink\r\n  FROM \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_BATCH}\\` b\r\n  LEFT JOIN \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_BATCH_TRAINEE}\\` bt \r\n    ON b.id = bt.batchId\r\n  LEFT JOIN \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_USER}\\` t \r\n    ON bt.traineeId = t.id\r\n  LEFT JOIN \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_COURSE}\\` c\r\n    ON b.courseId = c.id\r\n    ORDER BY b.id;\r\n`,\r\n\r\ngetBatchByBatchName: `\r\nSELECT \r\n  b.id AS batchId, \r\n  b.batchName, \r\n  b.startDate, \r\n  b.endDate,\r\n  c.id AS courseId, \r\n  c.courseName, \r\n  c.courseImg, \r\n  c.courseLink,\r\n  u.id AS traineeId, \r\n  u.firstName, \r\n  u.lastName\r\nFROM \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_BATCH}\\` b\r\nLEFT JOIN \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_COURSE}\\` c \r\n  ON b.courseId = c.id\r\nLEFT JOIN \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_BATCH_TRAINEE}\\` bt \r\n  ON b.id = bt.batchId\r\nLEFT JOIN \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_USER}\\` u \r\n  ON bt.traineeId = u.id\r\nWHERE b.batchName = @batchName;\r\n`,\r\n\r\ngetBatchIdsByTraineeId: `\r\n     SELECT DISTINCT bt.batchId\r\n    FROM \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_BATCH_TRAINEE}\\` bt\r\n    WHERE bt.traineeId = @traineeId;`,\r\n\r\n    updateBatch: `\r\n      UPDATE \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_BATCH}\\`\r\n          SET courseId = @courseId, batchName = @batchName, startDate = @startDate, endDate = @endDate,\r\n          updatedBy = @updatedBy, updatedAt = @updatedAt\r\n          WHERE id = @batchId`,\r\n  \r\n    deleteBatch: `\r\n       DELETE FROM \\`${process.env.PROJECT_ID}.${process.env.DATASET_ID}.${process.env.TABLE_BATCH}\\`\r\n          WHERE id = @id`,\r\n};\r\n"],"mappings":"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","ignoreList":[]}