{"version":3,"file":"courseStorage.js","names":["_storageConfig","require","uploadCourseImageToGCS","fileBuffer","fileName","mimeType","filePath","courseFolder","file","bucket","stream","createWriteStream","metadata","contentType","Promise","resolve","reject","on","err","name","end","error","Error","exports","deleteCourseImageFromGCS","delete"],"sources":["../../src/config/courseStorage.ts"],"sourcesContent":["import { bucket, courseFolder } from \"./storageConfig\";\r\n\r\nexport const uploadCourseImageToGCS = async (fileBuffer: Buffer, fileName: string, mimeType: string): Promise<string> => {\r\n  try {\r\n    const filePath = `${courseFolder}/${fileName}`;\r\n    const file = bucket.file(filePath);\r\n    const stream = file.createWriteStream({ metadata: { contentType: mimeType || \"application/octet-stream\" } });\r\n\r\n    return new Promise<string>((resolve, reject) => {\r\n      stream.on(\"error\", (err) => reject(\"Failed to upload image to GCS\"));\r\n      stream.on(\"finish\", () => resolve(`https://storage.googleapis.com/${bucket.name}/${filePath}`));\r\n      stream.end(fileBuffer);\r\n    });\r\n  } catch (error) {\r\n    throw new Error(\"Failed to upload image to GCS\");\r\n  }\r\n};\r\n\r\nexport const deleteCourseImageFromGCS = async (fileName: string): Promise<void> => {\r\n  try {\r\n    const filePath = `${courseFolder}/${fileName}`;\r\n    await bucket.file(filePath).delete();\r\n  } catch (error) {\r\n    throw new Error(\"Failed to delete image from GCS\");\r\n  }\r\n};\r\n"],"mappings":";;;;;;AAAA,IAAAA,cAAA,GAAAC,OAAA;AAEO,MAAMC,sBAAsB,GAAG,MAAAA,CAAOC,UAAkB,EAAEC,QAAgB,EAAEC,QAAgB,KAAsB;EACvH,IAAI;IACF,MAAMC,QAAQ,GAAG,GAAGC,2BAAY,IAAIH,QAAQ,EAAE;IAC9C,MAAMI,IAAI,GAAGC,qBAAM,CAACD,IAAI,CAACF,QAAQ,CAAC;IAClC,MAAMI,MAAM,GAAGF,IAAI,CAACG,iBAAiB,CAAC;MAAEC,QAAQ,EAAE;QAAEC,WAAW,EAAER,QAAQ,IAAI;MAA2B;IAAE,CAAC,CAAC;IAE5G,OAAO,IAAIS,OAAO,CAAS,CAACC,OAAO,EAAEC,MAAM,KAAK;MAC9CN,MAAM,CAACO,EAAE,CAAC,OAAO,EAAGC,GAAG,IAAKF,MAAM,CAAC,+BAA+B,CAAC,CAAC;MACpEN,MAAM,CAACO,EAAE,CAAC,QAAQ,EAAE,MAAMF,OAAO,CAAC,kCAAkCN,qBAAM,CAACU,IAAI,IAAIb,QAAQ,EAAE,CAAC,CAAC;MAC/FI,MAAM,CAACU,GAAG,CAACjB,UAAU,CAAC;IACxB,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOkB,KAAK,EAAE;IACd,MAAM,IAAIC,KAAK,CAAC,+BAA+B,CAAC;EAClD;AACF,CAAC;AAACC,OAAA,CAAArB,sBAAA,GAAAA,sBAAA;AAEK,MAAMsB,wBAAwB,GAAG,MAAOpB,QAAgB,IAAoB;EACjF,IAAI;IACF,MAAME,QAAQ,GAAG,GAAGC,2BAAY,IAAIH,QAAQ,EAAE;IAC9C,MAAMK,qBAAM,CAACD,IAAI,CAACF,QAAQ,CAAC,CAACmB,MAAM,CAAC,CAAC;EACtC,CAAC,CAAC,OAAOJ,KAAK,EAAE;IACd,MAAM,IAAIC,KAAK,CAAC,iCAAiC,CAAC;EACpD;AACF,CAAC;AAACC,OAAA,CAAAC,wBAAA,GAAAA,wBAAA","ignoreList":[]}