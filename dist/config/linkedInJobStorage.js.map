{"version":3,"file":"linkedInJobStorage.js","names":["_storageConfig","require","uploadLinkedInImageToGCS","fileBuffer","fileName","mimeType","filePath","LinkedInJobImageFolder","console","log","file","bucket","stream","createWriteStream","metadata","contentType","Promise","resolve","reject","on","err","name","end","error","Error","exports","deleteLinkedInImageFromGCS","delete"],"sources":["../../src/config/linkedInJobStorage.ts"],"sourcesContent":["import { bucket, LinkedInJobImageFolder } from \"./storageConfig\";\r\n\r\nexport const uploadLinkedInImageToGCS = async (fileBuffer: Buffer, fileName: string, mimeType: string): Promise<string> => {\r\n  try {\r\n    const filePath = `${LinkedInJobImageFolder}/${fileName}`;\r\n    console.log(\"Uploading file to:\", filePath);\r\n    const file = bucket.file(filePath);\r\n    const stream = file.createWriteStream({ metadata: { contentType: mimeType || \"application/octet-stream\" } });\r\n\r\n    return new Promise<string>((resolve, reject) => {\r\n      stream.on(\"error\", (err) => reject(\"Failed to upload image to GCS\"));\r\n      stream.on(\"finish\", () => resolve(`https://storage.googleapis.com/${bucket.name}/${filePath}`));\r\n      stream.end(fileBuffer);\r\n    });\r\n  } catch (error) {\r\n    throw new Error(\"Failed to upload image to GCS\");\r\n  }\r\n};\r\n\r\nexport const deleteLinkedInImageFromGCS = async (fileName: string): Promise<void> => {\r\n  try {\r\n    const filePath = `${LinkedInJobImageFolder}/${fileName}`;\r\n    await bucket.file(filePath).delete();\r\n  } catch (error) {\r\n    throw new Error(\"Failed to delete image from GCS\");\r\n  }\r\n};\r\n"],"mappings":";;;;;;AAAA,IAAAA,cAAA,GAAAC,OAAA;AAEO,MAAMC,wBAAwB,GAAG,MAAAA,CAAOC,UAAkB,EAAEC,QAAgB,EAAEC,QAAgB,KAAsB;EACzH,IAAI;IACF,MAAMC,QAAQ,GAAG,GAAGC,qCAAsB,IAAIH,QAAQ,EAAE;IACxDI,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEH,QAAQ,CAAC;IAC3C,MAAMI,IAAI,GAAGC,qBAAM,CAACD,IAAI,CAACJ,QAAQ,CAAC;IAClC,MAAMM,MAAM,GAAGF,IAAI,CAACG,iBAAiB,CAAC;MAAEC,QAAQ,EAAE;QAAEC,WAAW,EAAEV,QAAQ,IAAI;MAA2B;IAAE,CAAC,CAAC;IAE5G,OAAO,IAAIW,OAAO,CAAS,CAACC,OAAO,EAAEC,MAAM,KAAK;MAC9CN,MAAM,CAACO,EAAE,CAAC,OAAO,EAAGC,GAAG,IAAKF,MAAM,CAAC,+BAA+B,CAAC,CAAC;MACpEN,MAAM,CAACO,EAAE,CAAC,QAAQ,EAAE,MAAMF,OAAO,CAAC,kCAAkCN,qBAAM,CAACU,IAAI,IAAIf,QAAQ,EAAE,CAAC,CAAC;MAC/FM,MAAM,CAACU,GAAG,CAACnB,UAAU,CAAC;IACxB,CAAC,CAAC;EACJ,CAAC,CAAC,OAAOoB,KAAK,EAAE;IACd,MAAM,IAAIC,KAAK,CAAC,+BAA+B,CAAC;EAClD;AACF,CAAC;AAACC,OAAA,CAAAvB,wBAAA,GAAAA,wBAAA;AAEK,MAAMwB,0BAA0B,GAAG,MAAOtB,QAAgB,IAAoB;EACnF,IAAI;IACF,MAAME,QAAQ,GAAG,GAAGC,qCAAsB,IAAIH,QAAQ,EAAE;IACxD,MAAMO,qBAAM,CAACD,IAAI,CAACJ,QAAQ,CAAC,CAACqB,MAAM,CAAC,CAAC;EACtC,CAAC,CAAC,OAAOJ,KAAK,EAAE;IACd,MAAM,IAAIC,KAAK,CAAC,iCAAiC,CAAC;EACpD;AACF,CAAC;AAACC,OAAA,CAAAC,0BAAA,GAAAA,0BAAA","ignoreList":[]}